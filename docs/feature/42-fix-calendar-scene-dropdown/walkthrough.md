# 日程調整カレンダー シーン絞り込み機能 バグ修正内容の確認

## 概要
シーン絞り込みのプルダウンリストにそもそも選択可能なシーンが表示されない不具合を修正しました。

## 変更内容
### バックエンド（APIのレスポンス変更）
- **原因**: 以前の仕様では、各候補日程の「稽古可能なシーン」および「リーチ状態のシーン」だけを集約してプルダウンの選択肢を作成していました。そのため、**どの候補日であっても条件を満たさない（＝完全に稽古不可能な）シーンは、選択肢から除外**されてしまっていました。誰も回答していない時や、全員がNGを出しているような状況では、リストが空になってしまいます。
- **修正**: スクリプトに存在する「すべてのシーン」を必ずフロントエンドに返すよう、APIレスポンスの構造（`all_scenes`）を修正しました。
  - 対象ファイル: `backend/src/schemas/schedule_poll.py`, `backend/src/services/schedule_poll_service.py`

### フロントエンド（プルダウン生成ロジックの変更）
- 新しく追加された `all_scenes` を利用してプルダウンの選択肢を作成するように修正しました。これにより、候補日の回答状況に関わらず、常にすべてのシーンがフィルタリングの選択肢として表示・選択可能になります。
  - 対象ファイル: `frontend/src/features/schedule_polls/components/SchedulePollCalendar.tsx`, `frontend/src/features/schedule_polls/api/schedulePoll.ts`

## 検証結果
- スクリプトに関連づけられた、回答状況に依存しない**すべてのシーン**が、デフォルトでドロップダウンに表示・選択できることを確認しました。
- ユーザーが特定のシーンを選択すると、そのシーンに関連する必要なキャストの出欠状況をもとに、従来通りカレンダー上の候補日程が「稽古可能」「リーチ」「該当なし」に正確にフィルタリング（色分けと透明度の変更）されることを確認しました。

## コードレビュー
- **評価**: 5/5
- **コメント**: この変更により、回答が全く集まっていない初期の段階からでも「このシーンを稽古できる日はあるか？」といった逆引きのフィルタリングが常に機能するようになり、本来の機能目的を達成できました。スキーマの拡張も型安全に行われています。
