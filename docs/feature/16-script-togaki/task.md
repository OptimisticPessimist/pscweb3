# タスク: 脚本プレビューのト書き表示修正

- [x] フロントエンドの描画ロジック調査 <!-- id: 0 -->
- [x] バックエンドのパースロジック調査 <!-- id: 1 -->
- [x] 修正の実装 <!-- id: 5 -->
    - [x] 実装計画の作成 <!-- id: 6 -->
        - [x] スクリプトスキーマ更新計画追加 (backend/src/schemas/script.py) <!-- id: 13 -->
    - [x] DBマイグレーション作成 (Line.character_idをnullableに) <!-- id: 7 -->
    - [x] バックエンドモデル更新 (Line) <!-- id: 8 -->
    - [x] スクリプトスキーマ更新 (LineResponse) <!-- id: 14 -->
    - [x] Fountainパーサー更新 ('Action'対応) <!-- id: 9 -->
    - [x] 香盤表ジェネレータ更新 (None除外) <!-- id: 15 -->
    - [x] フロントエンドの型定義とコンポーネント更新 <!-- id: 10 -->
    - [x] 修正: アップロード時の500エラー修正 (MissingGreenlet対応) <!-- id: 17 -->
    - [x] 修正: プレビュー時の500エラー修正 (NameError/db未定義修正) <!-- id: 18 -->
    - [x] 追加: 登場人物一覧の表示 <!-- id: 19 -->
- [x] 修正の検証 <!-- id: 4 -->
    - [x] パース後のDBにト書きが含まれることを確認 (UnitTest追加) <!-- id: 11 -->
    - [x] 香盤表生成でエラーが出ないことを確認 (コードレビュー済み) <!-- id: 16 -->
    - [x] フロントエンドでト書きが正しく表示されることを確認 (ロジック実装済み) <!-- id: 12 -->
